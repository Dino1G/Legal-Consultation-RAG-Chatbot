---
marp: true
theme: default
paginate: true
title: GC Data Scientist Final Interview â€” Topic A
---

# GC Data Scientist Final Interview â€” Topic A

- **ä¸»é¡Œ**ï¼šLLM æµç¨‹è¨­è¨ˆèˆ‡ RAG æ–¹æ³•å¾©ç¾ï¼ˆPythonï¼‰
- **ç›®æ¨™**ï¼šä¾ pseudocode å®Œæˆã€Œæª¢ç´¢ â†’ æŽ’åº â†’ ç”Ÿæˆã€çš„æ³•å¾‹è«®è©¢ Chatbot
- **äº¤ä»˜**ï¼šGemma é©…å‹•çš„å¯åŸ·è¡ŒåŽŸåž‹ã€CLI Demoã€å¯è§€æ¸¬ç®¡ç·šèˆ‡å•†æ¥­åƒ¹å€¼åˆ†æž

---

## CLI Demo


![bg left:100% 100%](cli_demo.png)

---

## ç³»çµ±æž¶æ§‹

![bg right:100% 100%](sa.png)

---

##  å•†æ¥­æ‡‰ç”¨æ©Ÿæœƒ

1. **å®¢æœå¢žå¼·**ï¼šå€‹äººåŒ–ã€ç²¾æº–çš„å›žæ‡‰ã€‚
2. **äº’å‹•å¼çŸ¥è­˜åº«**ï¼šå“¡å·¥å¯æŸ¥æ”¿ç­–ã€åˆè¦èˆ‡æ—¢æœ‰æ¡ˆä¾‹ï¼ŒåŠ é€Ÿæ±ºç­–ã€é™ä½ŽéŒ¯èª¤ã€‚
3. **åˆè¦åŠ©ç†**ï¼šä¸²æŽ¥æ³•è¦è³‡æ–™åº«æ ¸å°æ“ä½œæ˜¯å¦åˆè¦ï¼ŒåŠæ—©ç™¼ç¾é¢¨éšªã€ä¿æŒæŒ‡å°Žå³æ™‚ã€‚


---

## ä¸»å‹•åž‹ RAG vs. æ¨™æº– RAG

![bg right:45% 80%](rag_quadrants.png)

ç¸½çµä¾†èªªï¼Œæ¨™æº– RAG é©ç”¨æ–¼åŸºæœ¬çš„å•ç­”å’Œç ”ç©¶ï¼Œè€Œä¸»å‹•åž‹ RAG å‰‡åœ¨è¤‡é›œå’Œæ•¸æ“šå¯†é›†åž‹æ‡‰ç”¨ä¸­ä½”æ“šä¸»å°Žåœ°ä½ã€‚

---

##  é—œéµæˆæžœ (Key Results)

1. **é™ä½Žè«®è©¢æˆæœ¬**ï¼šè‡ªå‹•è™•ç†ä¾‹è¡Œå•é¡Œï¼Œé‡‹æ”¾å°ˆæ¥­äººåŠ›ä¸¦ç¯€çœ LLM è¨ˆç®—æˆæœ¬ã€‚
2. **æå‡è‡ªåŠ©çŽ‡**ï¼š24/7 å›žè¦†ç¸®çŸ­è§£æ±ºæ™‚é–“ï¼Œæé«˜é¦–æ¬¡è§£æ±ºçŽ‡èˆ‡å®¢æˆ¶é«”é©—ã€‚
3. **é™ä½Žæ³•å¾‹é¢¨éšª**ï¼šæ ¹æ“šé©—è­‰æ–‡ä»¶å›žç­”ï¼Œé¿å…å¹»è¦ºï¼Œæ¸›å°‘ç½°å‰‡ã€è¨´è¨Ÿèˆ‡åˆè¦å¤±èª¤ã€‚

---

# Thank You

**Thank you for your time!**

- ðŸ“§ Emailï¼šdino.1g.yc@gmail.com
- ðŸ’¼ LinkedInï¼š@Dino Huang
- ðŸ“± Phoneï¼š+886-986-675-949

---

## Pseudocode å°ç…§

![bg right:40% 110%](pseudocode.png)


| Pseudocode æ­¥é©Ÿ | Python æ¨¡çµ„ |
| --- | --- |
| è³‡æ–™æº–å‚™ | `data_loader.py` Â· `preprocessing.py` |
| æª¢ç´¢å€™é¸ | `retriever.py` (BM25) |
| LLM æŽ’åº | `ranker.py` Â· `llm.py` |
| å›žç­”ç”Ÿæˆ | `generator.py` |
| ç®¡ç·šè¼¸å‡º | `pipeline.py` Â· `factory.py` Â· `cli.py` |

---

## å°ˆæ¡ˆä¸­çš„ BM25ï¼ˆ`retriever.py`ï¼‰

- **è³‡æ–™é è™•ç†**ï¼š`SimpleTokenizer` æœƒæŠŠè‹±æ–‡å°å¯«åŒ–ã€ç§»é™¤åœç”¨è©žï¼Œä¸¦å°‡ä¸­æ–‡æ‹†æˆå­— + é€£çºŒé›™å­—çµ„ï¼Œç¢ºä¿åˆ¤æ–·ã€Œé•ç´„ã€è³ å„Ÿã€ç­‰é—œéµè©žã€‚
- **ç´¢å¼•åˆå§‹åŒ–**ï¼š
  - å°æ¯ä»½ `Document` å»ºç«‹ `Counter`ï¼Œè¨˜éŒ„è©žé » (TF)ã€‚
  - åŒæ­¥ç´¯ç© `document_frequency`ã€`doc_lengths`ï¼Œä¸¦è¨ˆç®— `avg_doc_len`ã€‚
  - ä»¥ `k1=1.5`ã€`b=0.75` ä½œç‚ºé£½å’Œï¼é•·åº¦å› å­ã€‚
- **IDF å¿«å–**ï¼š`_idf()` ä»¥ log-smoothing è¨ˆç®— `log((N - df + 0.5)/(df + 0.5) + 1)`ï¼Œä¸¦å¯«å…¥å¿«å–é¿å…é‡è¤‡é‹ç®—ã€‚
- **æŸ¥è©¢æµç¨‹**ï¼š
  - å°‡ä½¿ç”¨è€…å•é¡Œ token åŒ–å¾Œï¼Œå°èªžæ–™é€ä¸€è¨ˆåˆ†ï¼š
    \\[ score(q, d) = \sum_{t \in q} IDF(t) \cdot \frac{TF_{t,d}(k_1 + 1)}{TF_{t,d} + k_1(1 - b + b \cdot |d|/avgdl)} \\
  - åªä¿ç•™åˆ†æ•¸ > 0 çš„æ–‡ä»¶ï¼ŒæŽ’åºä¸¦å›žå‚³å‰ `top_k` çš„ `SearchResult`ã€‚
- **è¨­è¨ˆé‡é»ž**ï¼šç´” Pythonã€ç„¡å¤–éƒ¨ä¾è³´ï¼Œæ–¹ä¾¿åœ¨ Demo ä¸­æ‹†è§£ score ä¾†æº (`reason` å­—æ®µå¯é¡¯ç¤º BM25 åˆ†æ•¸)ã€‚

![bg right:50% 70%](bm25_table.png)

---

## æµç¨‹æ‹†è§£

1. **Retrieval**ï¼šBM25 å»ºç«‹ TF/IDF çµ±è¨ˆï¼ŒæŸ¥è©¢æ™‚è¨ˆç®—åˆ†æ•¸å– Top-Kã€‚
2. **Re-ranking**ï¼šå°‡å•é¡Œ/å€™é¸æ®µè½é¤µå…¥ Gemmaï¼Œå–å¾—å¹³å‡å‘é‡ â†’ é¤˜å¼¦ç›¸ä¼¼åº¦ï¼›èˆ‡ BM25 åˆ†æ•¸ä¾ `alpha` æ··åˆã€‚
3. **Generation**ï¼šæ•´ç† Top-N å¼•æ–‡ç‚º Chat Templateï¼ŒæŒ‡æ´¾ Gemma ç”Ÿæˆæ¢åˆ—å¼å›žç­”èˆ‡æé†’ã€‚
4. **è¼¸å‡º**ï¼š`PipelineOutput` å›žå‚³æœ€çµ‚å›žç­”ã€å¼•ç”¨ä¾†æºï¼›`VerboseTracer` ä¿ç•™å®Œæ•´ traceã€‚

---

## æ¨¡çµ„è·è²¬

- `data_loader.py`ï¼šJSONL â†’ `Document` dataclassï¼Œä¿ç•™ä¾†æº/æ³•åŸŸ/æ¨™ç±¤ã€‚
- `preprocessing.py`ï¼šä¸­è‹±æ··åˆ tokenizer + ä¸­æ–‡å­—/é›™å­—çµ„æ“´å±•ã€‚
- `retriever.py`ï¼šBM25 å¯¦ä½œï¼ˆé è¨ˆç®—è©žé »ã€é•·åº¦ã€IDFï¼‰ï¼Œå°æ‡‰ pseudocode æª¢ç´¢æ­¥é©Ÿã€‚
- `ranker.py` & `llm.py`ï¼š`LLMReranker` å‘¼å« Gemma é€²è¡Œèªžç¾©è©•åˆ†èˆ‡å›žç­”ç”Ÿæˆã€‚
- `generator.py`ï¼šæ§‹å»º Promptï¼Œé™„ä¸Šä¾†æºæ¨™ç±¤èˆ‡è¡Œå‹•å»ºè­°ã€‚
- `pipeline.py` & `factory.py`ï¼šçµ±æ•´æµç¨‹ã€è¨»å†Š `HF_TOKEN`/`HF_MODEL_ID`ã€‚

---

## å¯è§€æ¸¬æ€§ Â· é©—è­‰

- **VerboseTracer**ï¼šè¼¸å‡ºæ–·è©žã€BM25 è¨ˆåˆ†ã€Gemma åµŒå…¥çµæžœèˆ‡ Promptï¼›ä¾¿æ–¼ç¨½æ ¸ã€‚
- **CLI Demo**ï¼š`python cli.py --verbose` å³æ™‚æŸ¥çœ‹ trace èˆ‡å›žç­”å“è³ªã€‚
- **é›¢ç·šè©•ä¼°å»ºè­°**ï¼šRecall@Kã€nDCGã€Gemma èˆ‡äººå·¥è©•ä¼°çš„ç­”è¦†å“è³ªã€‚
- **ç·šä¸Šç›£æŽ§å»ºè­°**ï¼šä½¿ç”¨è€…è©•åˆ†ã€å‡ç´šçŽ‡ã€Gemma æŽ¨è«–å»¶é²ï¼ˆp50/p95ï¼‰ã€‚

---

## æ“´å……è·¯ç·š

- **LLM æ›¿æ›**ï¼šéµå®ˆ `BaseLLM` ä»‹é¢å³å¯æ› GPTã€Claudeã€æœ¬åœ°å¤§æ¨¡åž‹ã€‚
- **Retrieval å‡ç´š**ï¼šå‘é‡æª¢ç´¢ã€Hybrid RAGï¼›æŽ¥å£ç¶­æŒ `retrieve()` å³å¯ã€‚
- **çŸ¥è­˜åº«æ“´å……**ï¼šå°Žå…¥å°ˆå±¬æ³•è¦ã€åˆç´„ç¯„æœ¬ã€FAQï¼›åˆ©ç”¨ `tags` æŽ§åˆ¶æ¬Šé™ã€‚
- **å®ˆé–€æ©Ÿåˆ¶**ï¼šä½Žä¿¡å¿ƒæ™‚å‡ç´šçœŸäººï¼›é€éŽ tracer å¿«é€Ÿå›žæº¯æ±ºç­–éŽç¨‹ã€‚

---

## Demo èˆ‡è½åœ°è—åœ–

- **CLI**ï¼š`python cli.py` / `--verbose` â€” å³æ™‚å›žç­”èˆ‡å¼•ç”¨è¿½è¹¤ã€‚
- **ç¨‹å¼ç”¨æ³•**ï¼š`pipeline = build_pipeline(...); pipeline.run(question)`ã€‚
- **éƒ¨ç½²å»ºè­°**ï¼š
  1. FastAPI å°è£ RAGPipelineã€‚
  2. åŠ å…¥ Redis/Varnish cacheã€OpenTelemetry tracingã€‚
  3. ä»‹æŽ¥ Web/Line/Slack Bot æä¾›å®¢æˆ¶æˆ–å…§éƒ¨è«®è©¢ã€‚


---

## å°çµ

- å·²ä¾ pseudocode å®Œæ•´å¾©ç¾ RAG æµç¨‹ï¼›Gemma LLM å…¼é¡§èªžç¾©æŽ’åºèˆ‡ç”Ÿæˆã€‚
- æ¨¡çµ„åŒ–è¨­è¨ˆ + VerboseTracer è®“æµç¨‹å¯è§€æ¸¬ã€æ˜“ç¶­è­·ã€æ˜“æ“´å……ã€‚
- ä¸‹ä¸€æ­¥ï¼šæ’å…¥ä¼æ¥­ç´š LLMã€å»ºç«‹è‡ªå‹•è©•ä¼°ã€å°Žå…¥å¤šè¼ªå°è©±èˆ‡æ¬Šé™æŽ§ç®¡ã€‚
  
> æ­¤ç‚ºä¸€èˆ¬è³‡è¨Šï¼Œå»ºè­°è«®è©¢å¾‹å¸«ã€‚

---

# Thank You

**Thank you for your time!**

- ðŸ“§ Emailï¼šdino.1g.yc@gmail.com
- ðŸ’¼ LinkedInï¼š@Dino Huang
- ðŸ“± Phoneï¼š+886-986-675-949
